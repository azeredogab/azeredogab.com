{"componentChunkName":"component---src-templates-blog-post-js","path":"/acessando-cookies-do-front-end-com-laravel/","result":{"data":{"site":{"siteMetadata":{"title":"azeredogab"}},"markdownRemark":{"id":"db45cbc1-717a-509b-a9e1-557b3a26fd7a","excerpt":"√â poss√≠vel em nossa aplica√ß√£o, n√≥s incluirmos cookies no lado do Javascript, mas n√≥s queremos utilizar esses mesmos cookies tamb√©m do lado do Back-End. N√≥s‚Ä¶","html":"<p>√â poss√≠vel em nossa aplica√ß√£o, n√≥s incluirmos cookies no lado do Javascript, mas n√≥s queremos utilizar esses mesmos cookies tamb√©m do lado do Back-End. N√≥s poder√≠amos usar a global <code class=\"language-text\">$_COOKIE</code> do PHP, mas se n√≥s usamos Laravel, temos outras possibilidades mais interessantes. Vamos ver como isso funciona.</p>\n<h2>Inserindo cookies no Front-End</h2>\n<p>Nesse post, n√≥s focaremos em lidar com cookies no Back-End. Se voc√™ estiver interessado em saber como trabalhar com cookies no javascript, leia esse artigo.\nAgora, n√≥s temos um cookie existente com a chave ‚Äúis-collapsed‚Äù. N√≥s queremos pegar o valor desse cookie no Back-End, para conseguir\naplicar algum tratamento.</p>\n<p>Agora, n√≥s temos um cookie existente com a chave ‚Äúis-collapsed‚Äù. N√≥s queremos pegar o valor desse cookie no Back-End, para conseguir\naplicar algum tratamento.</p>\n<h2>Laravel e Cookies</h2>\n<p>N√≥s podemos acessar nossos cookies pelo m√©todo <code class=\"language-text\">request()-&gt;cookie()</code> ou utilizando a Facade Cookie.</p>\n<p>O problema √©, se n√≥s queremos pegar nosso cookie que foi inserido no Front-End (javascript), o m√©todo nos retorna o valor <code class=\"language-text\">null</code>. Mas se n√≥s utilizamos a vari√°vel <code class=\"language-text\">$_COOKIE</code>, n√≥s conseguimos acessar. Ent√£o, se esse cookie existe, qual √© o problema ?</p>\n<p>Por padr√£o, o framework traz um middleware para encriptar cookies. Se n√≥s criamos um cookie a partir do backend, ele √© automaticament eencriptado e o\nLaravel consegue ler. J√° quando criamos um cookie a partir do FrontEnd (Javascript), ele n√£o √© encriptado e por isso que o Laravel n√£o consegue acessar o seu valor.</p>\n<h2>Como resolver isso ?</h2>\n<p>No arquivo <code class=\"language-text\">app/Http/Kernel.php</code>, no grupo de middlewares web, n√≥s podemos encontrar uma refer√™ncia √† classe <code class=\"language-text\">EncryptCookies::class</code> em uma linha. Comentando esse linha, n√≥s iremos desligar a encripta√ß√£o automatica de cookies, mas essa abordagem n√£o √© a solu√ß√£o que n√≥s queremos.</p>\n<p>O caminho sugerido √© utilizar o middleware e adicionar algumas exce√ß√µes que n√£o precisam ser encriptadas, e o Laravel ir√° conseguir\nler essas exce√ß√µes. N√≥s podemos inserir essas exce√ß√µes dentro do middleware <code class=\"language-text\">app/Http/Middleware/EncriptCookies.php</code>.</p>\n<p>Ao adicionar o nome do nosso cookie ao array $except, n√≥s poderemos ler o cookie com a Facade Cookie, ou com o m√©todo request()->cookie().</p>\n<p>Se voc√™ quiser mais informa√ß√µes, d√™ uma olhada na documenta√ß√£o, ou mais especificamente na sess√£o de Cookies e Encripta√ß√£o.</p>\n<h3>Cr√©ditos:</h3>\n<ul>\n<li>üôè <a href=\"https://pineco.de/accessing-front-end-cookies-laravel/\">https://pineco.de/accessing-front-end-cookies-laravel/</a></li>\n</ul>","frontmatter":{"title":"Acessando Cookies do Front end com Laravel","date":"15/06/2019","description":"√â poss√≠vel em nossa aplica√ß√£o, n√≥s incluirmos cookies no lado do Javascript, mas n√≥s queremos utilizar esses mesmos cookies tamb√©m do lado do Back-End.","image":"/acessando-cookies-do-front-end-com-laravel/facebook-share.png","tags":["development"]},"fields":{"slug":"/acessando-cookies-do-front-end-com-laravel/"}}},"pageContext":{"slug":"/acessando-cookies-do-front-end-com-laravel/","previous":null,"next":{"fields":{"slug":"/php-8-e-a-entrada-do-JIT/"},"frontmatter":{"title":"PHP 8 e a entrada do JIT"}}}}}